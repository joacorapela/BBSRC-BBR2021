\documentclass[a4paper,11pt]{article}
\usepackage[margin=2cm]{geometry}
%% Language and font encodings
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
% \usepackage{microtype}      % fine pdf font control

\usepackage[scaled=0.92]{helvet} \renewcommand{\familydefault}{\sfdefault}
\usepackage{xcolor} % -- loaded by tikz


% \usepackage[colorlinks=true]{hyperref}
\usepackage[colorlinks = true,
            linkcolor = blue!50!black!50,
            urlcolor  = blue!50!black!50,
            citecolor = blue!50!black!50,
            anchorcolor = blue!50!black!50]{hyperref}
\usepackage[super]{natbib}
\renewcommand{\citet}[1]{[\citenum{#1}]}
% \usepackage{apalike}
\usepackage{graphicx}
\usepackage{verbatim}

\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{fit}
\usetikzlibrary{calc}

\usepackage{float}
\usepackage{wrapfig}

\usepackage[font={footnotesize}]{caption}

\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
            {-2.5ex\@plus -1ex \@minus -.25ex}%
            {1.25ex \@plus .25ex}%
            {\normalfont\normalsize\bfseries}}
\makeatother
\setcounter{secnumdepth}{4} % how many sectioning levels to assign numbers to
\setcounter{tocdepth}{4}    % how many sectioning levels to show in ToC
\usepackage[tiny]{titlesec} % format section titles
\def\headfmt{\color{blue!50!black!50}\bfseries}
\titleformat*{\section}{\headfmt}
\titlespacing*{\section}{0pt}{*1}{*0}[-4em]
\titleformat*{\subsection}{\headfmt}
\titlespacing*{\subsection}{0pt}{*0.5}{*0}
\titleformat*{\subsubsection}{\headfmt}
\titlespacing*{\subsubsection}{0pt}{*0}{*0}
\titleformat*{\paragraph}{\headfmt}
\titlespacing*{\paragraph}{0pt}{*0.5}{*0}

\usepackage{enumitem}
\setlist[description]{
    topsep=0pt,
    itemsep=0pt,
    partopsep=0pt,
    parsep=0pt,
    font=\headfmt,
    leftmargin=1em}

\renewcommand{\footnote}[1]{ [#1]}

\title{Data Management Plan}
\author{}
\date{}

\begin{document}

\maketitle

% \textcolor{orange}{\textit{The following template is provided to applicants to assist in the development of a Data Management Plan (DMP) to accompany a research proposal. The notes (in italics) provide further context and guidance for its completion and should be deleted prior to submission. Applicants should consider submission of a DMP which is proportional to the quantity and nature of the data. Where substantial data is generated from the research, it is expected that the DMP will be longer and more detailed than studies generating small amounts of data, where DMPs may be significantly shorter. In either case, the DMP should be a maximum of 3 pages in length.}}

\setcounter{section}{-1}

\section{Proposal name}

% \textcolor{orange}{\textit{Exactly as in the proposal that the DMP accompanies}}

Machine intelligence for (neuroscience) experimental control

\section{Description of the data}
\subsection{Type of study}

% \textcolor{orange}{\textit{Up to three lines of text that summarise the type of study (or studies) for which the data are being collected}}

The project will generate software modules appropriate for use in behavioural neuroscience experiments using animal models, and other types of study that involve a combination of reactive experimental (particularly behavioural) control and streamed data acquisition.  

% Enhancement of an existing software resource, the Bonsai software
% ecosystem for data acquisition and experimental control.

\subsection{Types of data}

% \textcolor{orange}{\textit{Types of research data to be managed: quantitative or
% qualitative, sequencing data, images, models, software, scripts, protocols, and
% procedures}}

This is a software project.  We will produce and manage new modules to be
integrated into the Bonsai software ecosystem.  These will include extensions
to incorporate non-native code packages into Bonsai (Section 2.1, Case for
Support), a general abstraction framework for data processing (Section 2.2,
Case for Support), machine learning functionality added to Bonsai (Section 2.3,
Case for Support) and documentation.

% We propose to incorporate into the Bonsai software ecosystem state-of-the-art
% machine-learning models, as well as capabilities to enable the communication
% between Bonsai, written in C\#, and machine-learning applications written in
% Python, R and Matlab.

\subsection{Origin of the data}

% \textcolor{orange}{\textit{Are you creating new primary data (i.e. collecting or
% generating data)? Or are you re-using already available sources, including to
% create new data (e.g. a new dataset created from transformation or integration
% of existing data)? If data is being re-used, is it publicly accessible?}}

New modules will be created and tested by software research engineers at UCL in consultation with staff at NeuroGEARS Ltd (a project collaborator).  These will be integrated into the existing Bonsai software ecosystem.

We will access experimental data during the testing phase, but will not seek to manage these data within the project.  Such data will have been collected in the course of other projects and will continue to be managed by the relevant laboratories in accordance with the protocols they have defined. 

% We will not create primary data for the proposed project. However, as outlined
% in \emph{Section 2.5 Testing with neuroscience data} of the \emph{Case for
% Support} document, the large community of Bonsai users at the Sainsbuy Wellcome
% Centre (SWC) will test the new functionality added to Bonsai prior to its
% distribution. For these tests, this community will use their own datasets, its
% including high-density Neuropixels physiological recordings, with optogentic
% manipulations and high-resolution video monitoring of animal behaviour. These
% datasets will not be made publicly available for the purposes of the proposed
% project. However, we are building infrastructure to make them available in the
% near future.

% The proposed enhancements to the Bonsai ecosystem will impact a wide range of
% existing and to-be-created datasets collected by open-source initiatives
% already integrated into the Bonsai ecosystem. For example, datasets of feeding
% behaviour in flies (collected with FlyPAD
% sensors\footnote{\url{https://flypad.rocks/}}), high-resolution zebrafish
% tracking datasets (collected with
% BonZeb\footnote{\url{https://github.com/ncguilbeault/BonZeb/}}),
% electrophysiology datasets (collected with products supported by
% OpenEphys\footnote{\url{https://open-ephys.org/}} or with NeuroPixels
% probes\footnote{\url{https://www.neuropixels.org/}})), datasets of in-vivo
% imaging of brain activity (collected with the UCLA
% Miniscope\footnote{\url{http://miniscope.org/}} or with NeuroPhotometrics
% products\footnote{\url{https://neurophotometrics.com/}}), datasets using rich
% 2D or 3D visual environments (created with
% BonVision\footnote{\url{https://bonvision.github.io/}}), and animal behavioral
% datasets (with body parts tracked with
% DeepLabCut\footnote{\url{http://www.mackenziemathislab.org/deeplabcut}}).

\subsection{Format and scale of the data}

% \textcolor{orange}{\textit{File formats, software used, number of records, databases, sweeps, repetitions... (in terms that are meaningful in your field of research). An indication of the size of data to be stored and shared.}}

Software modules will comprise source files in various programming languages: C\#, Python, MATLAB and R, along with supporting files for version control, compilation, testing, packaging and documentation.

% The source code for the core Bonsai ecosystem and the majority of extension
% packages are hosted at \url{github.com/bonsai-rx}.

\section{Data management, documentation, and curation}

% \textcolor{orange}{\textit{Keep this section concise and accessible to readers who are not data management experts.  Focus on principles, systems, and major standards. Focus on the main kind(s) of study data.  Give brief examples and avoid long lists.}}


\subsection{Managing, storing and curating data}

% Briefly describe how data will be stored, backed-up, managed and curated in the short to medium term. Specify any community agreed or other formal data standards used (with URL references). 

Software will be developed within the git distributed version control
system, with public repositories made available within a specially
created organisation at github.com and linked from \url{github.com/bonsai-rx}.

Mirrors of all repositories will be maintained within the Sainsbury Wellcome Centre data storage system at UCL. 

% management
Package installation and updates are supported by standalone package management
software included within the core Bonsai distribution and hosted in a shared
centralised and curated repository. This ensures that bugfixes and enhancements
are easily available and, importantly, allows for reproducible deployment of
user environments to guarantee existing experiments are not disrupted by system
changes.
%
Large-scale experimental projects such as the International Brain Laboratory
have leveraged this capability of Bonsai to standardise data acquisition and
control software across dozens of laboratories around the world.
%
Community technology previews are made available through the package manager,
letting early adopters opt-in to the latest features before they are generally
available. This allows the community to report issues with new features on
GitHub, thereby distributing bug reporting and triage, and improving the
quality of stable releases.

The core compiler and the Integrated Development Environment (IDE) is extensively tested, and uses a strongly typed language
that greatly reduce bugs at compile-time. Best practices for leveraging this
infrastructure for building new packages are in place. The software engineers
recruited to this project will work with our collaborators at NeuroGEARS Ltd,
to strengthen and maintain these practices. Once fully familiar with the Bonsai
core architecture they will participate in review of pull requests and other
code contributions.


% Bonsai is a freely available open-source resource, already widely adopted by
% the systems neuroscience and behavioural science communities (see Fig 1f).
% Current contributors include other large open projects (OpenEphys, DeepLabCut),
% and companies developing and supplying new hardware devices
% (Neurophotometrics). This community uptake, engagement, and commitment provides
% a foundation for long-term sustainability.

% NeuroGEARS Ltd.\ is a keystone of this community and a key collaborator in the
% current proposal. Founded by the original developer of Bonsai, it helps to
% support and expand the user base well beyond the life of the current proposal.
% NeuroGEARS currently provides quality control and curation for the core Bonsai
% code, and provides training and support services for research institutions
% around the world who want to start using Bonsai. NeuroGEARS also facilitates
% knowledge transfer between users and institutions adopting Bonsai, by
% moderating the community user forums and collaborating with organisations who
% want to build new innovative research projects on top of Bonsai, as in the
% current proposal.

% The specific contributions developed as part of this project will form new core
% components and packages within the Bonsai ecosystem. In particular, the new
% language integration packages will support long-term sustainability, by
% dramatically increasing Bonsai's interoperability with existing software
% development communities which are already well established in basic science
% (MATLAB, Python, R). Developing these new packages with input from the core
% advisory panel of Bonsai, and early public distribution and user testing within
% the SWC and with planned workshops, will ensure solid and broad user engagement
% from the beginning of the development cycle and will therefore build momentum
% for their use, support and dissemination. Close collaboration with the core
% maintainers of the Bonsai ecosystem at NeuroGEARS will allow them to take over
% responsibility for maintenance and support of these packages beyond the end of
% the project, following the same principles of open-source and free sharing of
% knowledge that characterises the entire Bonsai ecosystem.

\subsection{Metadata standards and data documentation}

% \textcolor{orange}{\textit{What metadata is produced about the data generated from the research? For example descriptions of data that enable research data to be used by others outside of your own team.  This may include documenting the methods used to generate the data, analytical and procedural information, capturing instrument metadata alongside data, documenting provenance of data and their coding, detailed descriptions for variables, records, etc.}}

% documentation
Bonsai documentation, including learning materials and all relevant community
links are publicly accessible at \url{bonsai-rx.org}.
% A forum where Bonsai users daily exchange questions and answers can be accessed at the public
% repository \url{https://groups.google.com/g/bonsai-users}. Currently more than
% 700 users contribute to this forum (Figure~1f, \emph{Case for Support}).
Documentation will be created for the new modules produced in this project that
meets the existing standards, and will be integrated into the Bonsai
documentation framework.

Classes, methods and functions will be documented in the code, and automatic
documentation tools (e.g., Sphinx for Python code, or Sphinx for .Net for C\#)
will be used to automatically generate API documentation. This documentation
will be complemented with class and interaction diagrams, documenting the
structure and dynamics of the application objects.

\subsection{Data preservation strategy and standards}

% Plans and place for long-term storage, preservation, and planned retention period for the research data. Formal preservation standards, if any. Indicate which data may not be retained (if any). Also, briefly describe what will be stored long-term, raw data, processed data?

Persistent storage and long term preservation will be achieved using
Zenodo [\url{https://zenodo.org/}], which is well integrated with
GitHub.



\section{Data sharing and access}
\subsection{Where will data be shared?}
% Identify any data repository (-ies) that are, or will be, entrusted with storing, curating and/or sharing data from your study, where they exist for particular disciplinary domains or data types.
Software modules will be available on Github and on Zenodo for long-term
preservation, with links from the Bonsai project site
(\url{https://bonsai-rx.org}) and available through the Bonsai system's package
management interface. Tutorials on how to use the added machine learning
functionality will be available at the Bonsai project site
(\url{https://bonsai-rx.org}) and automatically generated API documentation for
this functionality will be available through ReadTheDocs [\url{https://readthedocs.org/}].


\subsection{When will data be available?}
% It is expected that timely release would generally be no later than the release through publication of the main findings and should be in line with established best practice in the field. Where best practices do not exist release within three years of generation of the dataset is suggested as a guide.

% Release management: repositories will be public throughout, but marked as developmental.  Alpha-level code will be available but not publicised until after extensive testing.  Will be integrated into package management and advertised once it achieves release quality.

Modules will be made available once they have passed rigorous internal quality checks.
Software will be automatically tested during development with a comprehensive set of unit test and integration tests, implemented as  GitHub Actions.  Once complete, each 
module will be tested by a group of beta adopters (largely drawn from within the SWC to enable rapid feedback and debugging).  Project outputs will be accepted when all tests run successfully and no major functional problems are reported in beta tests.

Release management: we will create a new release after each of the machine
learning functionalities (described in Section~2.3 of the Case for Support) is
integrated into the Bonsai ecosystem following the above method to accept a
project output. Credentials for release will be granted initially by Dr.
Gonçalo Lopes, Head Engineer at Neurogears and the current curator of the
Bonsai official package feed, but might be expanded to other team members after
training.  Acceptance criteria for release will be a group decision between
Dr.~Lopes, Dr.~Rapela, Prof.~Sahani and Prof.~Mrsic-Flogel.

\subsection{How will data be made findable and accessible?}

% Indicate how potential new users (outside of your organisation) can find out about your data and identify whether it could be suitable for their research purposes, also consider how it will be licenced. The approach should encompass data in all its forms as well as software. This section could also outline access procedures, how your data will be able to be cited and tracked.

Bonsai is already a widely adopted software ecosystem.  Community users will engage with the development of new capabilities in this project through planned workshops and the Bonsai users forum [\url{https://groups.google.com/g/bonsai-users}]. 

On release, modules will be announced on the Bonsai website and available for installation through the package management system.

We anticipate that incorporation of these new capabilities, associated workshops, announcements, and possible future publications will drive further adoption of Bonsai in behavioural systems neuroscience laboratories worldwide.

\subsection{How will data be made reusable?}

% What steps will you take to ensure that your data could be re-analysed by other researchers? (e.g. availability of meta data, worked examples, vignettes). How will metadata be made available?

Several factors will contribute to the reusability of new functionality
incorporated into Bonsai. Code implementing this functionality will be
available in Github and Zenodo, under the permissive MIT license. Emphasis on standard and
uniform code style, achieved with the help of code review and paired
programming, will generate readable code, easier to read and extend by third
parties. Automated build methods will simplify code building and encourage
modification by new developers. Test cases with large coverage will motivate
software developers to modify Bonsai, without the risk of introducing
undetected bugs into the software. Carefully designed software, with simple and
clear object interfaces, will simplify the reuse of the proposed software.

\subsection{Restrictions or delays to sharing, with planned actions to limit such restrictions} 
% Restriction to data sharing may be due to subject confidentiality or to ensure you can gain IP protection. Applicants should ensure they have obtained necessary clearances from relevant collaborators with regards to the content of the proposal including the data sharing plan in line with the BBSRC Research Grants Guide. Where possible please indicate when data will be made available following a period of restriction.  

All distributed software will be developed as part of the project, based on published and unrestricted algorithms.  Thus it is unencumbered by IP restrictions and will be available throughout development as described above.

\section{Data security (where relevant)}

The software produced will be freely available and open sourced.  It will contain no personal data.  User access to the repository will be anonymous and user personal information will not be collected.  Thus security concerns do not apply.

\section{Capabilities}

The project collaborator, NeuroGEARS Ltd, and its lead, Dr.~Gon\c{c}alo Lopes, have extended experience of software management and distribution, and will support our efforts.  In addition we will benefit from advice from UCL's recently established Centre for Advanced Research Computing.

\section{Responsibilities}

Drs.~Rapela (team member) and Lopes (collaborator) will jointly take responsibility for technical quality of version control, testing, documentation, and distribution.  Oversight will be provided by Profs.~Sahani (co-I) and Mrsic-Flogel (PI) along with a planned scientific advisory board committee that will include international experts.


\section{Relevant institutional, departmental or study policies on data sharing and data security}

Not applicable.

\section{Author}

The plan was prepared jointly by the team.  Enquiries should be directed to the PI and Co-I.

\end{document}
